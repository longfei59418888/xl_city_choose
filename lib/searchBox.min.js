'use strict';var _createClass=function(){function a(b,c){for(var f,d=0;d<c.length;d++)f=c[d],f.enumerable=f.enumerable||!1,f.configurable=!0,'value'in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_react=require('react'),_react2=_interopRequireDefault(_react),_xl_extend=require('xl_extend');Object.defineProperty(exports,'__esModule',{value:!0});function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function _inherits(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var Main=function(a){function b(){var n,h,j,k;_classCallCheck(this,b);for(var l=arguments.length,g=Array(l),m=0;m<l;m++)g[m]=arguments[m];return k=(h=(j=_possibleConstructorReturn(this,(n=b.__proto__||Object.getPrototypeOf(b)).call.apply(n,[this].concat(g))),j),j.state={showPlaceholder:!1},j.searchBlur=function(o){var _this$refs=j.refs,p=_this$refs.placeholder,q=_this$refs.searchBox,r=j.props.onChange;1===o&&(q.querySelector('input').value='');var s=q.querySelector('input').value;0<s.length||(r(''),j.setState({showPlaceholder:!1}),q.style.width='calc(100% - 50Px)',p.style.left='50%',p.style.marginLeft='-'+j.placeholderWidth/2+'px')},j.searchFours=function(){var _this$refs2=j.refs,o=_this$refs2.placeholder,p=_this$refs2.searchBox,q=j.props.onChange,r=(0,_xl_extend.getVendorPrefix)();o.style[r+'Transition']='all .2s linear',p.style[r+'Transition']='all .2s linear',p.style.width='calc(90% - 50Px)',o.style.left=0,o.style.marginLeft=0,q&&q(p.querySelector('input').value),setTimeout(function(){j.setState({showPlaceholder:!0})},250)},h),_possibleConstructorReturn(j,k)}return _inherits(b,a),_createClass(b,[{key:'componentDidMount',value:function componentDidMount(){var g=this.refs.placeholder;this.placeholderWidth=g.offsetWidth,g.style.marginLeft='-'+this.placeholderWidth/2+'px'}},{key:'render',value:function render(){var j=this,_props=this.props,g=_props.placeholder,k=_props.onChange,h=this.state.showPlaceholder;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement('div',{className:'xl_city_search'},_react2.default.createElement('div',null,_react2.default.createElement('div',{ref:'searchBox',className:'search-box'},h?_react2.default.createElement('img',{onClick:function onClick(){j.refs.searchBox.querySelector('input').value='',k('')},src:require('./cha.png'),alt:''}):'',_react2.default.createElement('input',{type:'text',onFocus:this.searchFours,onBlur:this.searchBlur,onChange:function onChange(l){k&&k(l.target.value)},placeholder:h?g:''}),_react2.default.createElement('div',{className:'placeholder'},_react2.default.createElement('p',{ref:'placeholder'},_react2.default.createElement('img',{src:require('./search.png'),alt:''}),_react2.default.createElement('span',null,h?'':g))))),_react2.default.createElement('span',{onClick:function onClick(){j.searchBlur(1)}},'\u53D6\u6D88')))}}]),b}(_react2.default.Component);exports.default=Main;
